# micrometer
- 서비스를 운영시 애플리케이션의 CPU, 메모리, 커넥션 사용, 고객 요청수 같은 수 많은 지표들을 확인하는 것이 필요하다.
- 그래야 대응도 할 수 있고, 실제 문제가 발생해도 원인을 빠르게 파악해서 대처할 수 있다.
- 이를 다양한 모니터링 툴을 이용해서 진행할 수 있다.
![image](https://github.com/hanuk96/TIL/assets/12428689/54f84921-5930-42e1-be16-89b62a892d62)
- 중간에 사용하는 모니터링 툴을 변경하면 어떻게 될까?
- 기존에 측정했던 코드를 모두 변경한 툴에 맞도록 다시 변경해야 한다.
- 개발자 입장에서는 단순히 툴 하나를 변경했을 뿐인데, 측정하는 코드까지 모두 변경해야 하는 문제가 발생한다.\
- 이런 문제를 해결하는 것이 바로 마이크로미터(Micrometer)라는 라이브러리이다.
- 보통은 스프링이 이런 추상화를 직접 만들어서 제공하지만, 마이크로미터라는 이미 잘 만들어진 추상화가있기 때문에 스프링은 이것을 활용한다.
- 스프링 부트 actuator는 micrometer를 기본으로 내장해서 사용한다.

### metric
- micrometer는 다양한 지표 수집 기능을 이미 만들어서 제공한다.
- 그리고 스프링 부트 actuator는 micrometer가 제공하는 지표 수집을 @AutoConfiguration 을 통해 자동으로 등록해준다.
- 스프링 부트 actuator를 사용하면 수 많은 metric(지표)을 편리하게 사용할 수 있다.
  - JVM 메트릭
  - 시스템 메트릭
  - 애플리케이션 시작 메트릭
  - 스프링 MVC 메트릭
  - 데이터 소스 메트릭
  - 로그 메트릭
  - 사용자 정의 메트릭
  - 톰캣 메트릭
```
톰캣의 최대 쓰레드, 사용 쓰레드 수를 포함한 다양한 메트릭을 확인할 수 있다.

server:
 tomcat:
  mbeanregistry:
   enabled: true
```

