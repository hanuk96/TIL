# Event
### 시스템 간 강결합 문제
- 결제시스템을 예로 들어볼때 보통 결제시스템은 외부에 존재한다.
- 취소시 transaction을 어떻게 진행해야 할까? 이때 고려해볼 문제 두 가지가 있다.
  - 외부서비스가 비정상일경우 처리를 어떻게 해야할지?
  - 외부시스템의 성능저하로 인한 timeout은 어떻게 설정할지?
- 또한 주문과 domain이 섞이는 문제도 생길 수 있다.
```java
public void Order{
  public void cancel(RefundService refundService){
//주문로직
    verifyNotYetShipped();
    this.state = OrderState.CANCEL;

//결제로직
    this.refundState = OrderState.REFUND_STATED;

    try{
      refundService.refund(getPaymentId());
      this.refundState = OrderState.COMPLETED;
    }
    catch(Exception e){
    }    
  }
}
```
- 결제기능이 바뀌면 주문이 영향이 받는다? 이는 좋지 않아보임
- event를 이용한 비동기를 통해 이를 해결해보자

### event
- "과거에 벌어진 어떤 것"을 의미하며, 원하는 동작을 수행하는 기능을 한다.
- 이벤트 관련 구성요소
  - event 생성 주체(entity, value, domain service) -> event dispatcher -> event handler
